{"version":3,"sources":["components/Logo/Logo.js","components/Authorization/authorization.module.scss","components/Authorization/FormAuthorization/formAuthorization.module.scss","components/Route/PrivateRoute.js","components/Route/PublicRoute.js","components/Route/routes.js","components/Route/ProtectedRoute.js","store/actions/actionAuthorization.js","utils/axiosConfigAuth.js","components/Authorization/FormAuthorization/FormAuthorization.js","utils/sessionToken.js","components/Authorization/Authorization.js","App.js","store/reducers/authorization.js","store/reducers/index.js","index.js"],"names":["Logo","props","width","height","viewBox","fill","fillRule","clipRule","d","module","exports","PrivateRoute","children","isAuthenticated","rest","render","location","to","pathname","state","from","PublicRoute","routes","path","component","lazy","exact","ProtectedRoutes","fallback","map","Component","changeAuthorization","authorization","type","payload","instance","axios","create","baseURL","responseType","defaults","headers","common","FormAuthorization","classnames","classnamesBind","bind","styles","dispatch","useDispatch","useState","login","setLogin","pass","setPass","error","setError","history","useHistory","handleChangeInput","e","setValue","target","value","className","onSubmit","preventDefault","post","a","axiosConfigAuth","username","password","then","res","data","catch","response","auth_success","refrash_token","auth_error","access_token","sessionStorage","setItem","push","htmlFor","id","required","onChange","defaultValue","href","Authorization","auth","useSelector","useEffect","App","token","getItem","ProtectedRoute","initState","action","allReducers","combineReducers","store","createStore","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cd3435a3.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Logo = (props) => {\r\n    const { width, height } = props;\r\n    return (\r\n        <svg width={width} height={height} viewBox=\"0 0 45 45\" fill=\"none\">\r\n            <path\r\n                fillRule=\"evenodd\"\r\n                clipRule=\"evenodd\"\r\n                d=\"M0 22.25C0 9.96178 9.96198 0 22.2504 0C34.538 0 44.5 9.96178 44.5 22.25C44.5 25.0644 43.9774 27.7567 43.0241 30.2353C41.3767 27.6868 38.5104 26 35.25 26C30.1414 26 26 30.1414 26 35.25C26 38.5104 27.6868 41.3768 30.2354 43.0241C27.7569 43.9775 25.0647 44.5 22.2504 44.5C9.96198 44.5 0 34.5382 0 22.25ZM30.2354 43.0241C31.6801 43.9579 33.4018 44.5 35.25 44.5C40.3586 44.5 44.5 40.3586 44.5 35.25C44.5 33.4017 43.9579 31.6801 43.0241 30.2353C40.7682 36.1002 36.1001 40.7682 30.2354 43.0241Z\"\r\n                fill=\"#0EC261\"\r\n            />\r\n        </svg>\r\n    );\r\n};\r\n\r\nLogo.propTypes = {\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n};\r\n\r\nexport default Logo;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap-center\":\"authorization_wrap-center__1IkdQ\",\"header\":\"authorization_header__-hK99\",\"heading-h1\":\"authorization_heading-h1__Egga4\",\"heading-h1_margin\":\"authorization_heading-h1_margin__3hkn6\",\"wrap-form\":\"authorization_wrap-form__EaQ7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-authorization\":\"formAuthorization_form-authorization__Ks6He\",\"heading-form\":\"formAuthorization_heading-form__2voz2\",\"form-label\":\"formAuthorization_form-label__fxQBA\",\"form-input\":\"formAuthorization_form-input__2ZFcc\",\"form-wrap-button\":\"formAuthorization_form-wrap-button__Kgy_Q\",\"form-link\":\"formAuthorization_form-link__2SFtN\",\"form-button\":\"formAuthorization_form-button__pHqaO\",\"error-msg\":\"formAuthorization_error-msg__2ZKnF\",\"active-error-msg\":\"formAuthorization_active-error-msg__2YpfY\"};","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PrivateRoute = ({ children, isAuthenticated, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) =>\r\n                !isAuthenticated ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/',\r\n                            state: { from: location },\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\nPrivateRoute.propTypes = {\r\n    children: PropTypes.any,\r\n    isAuthenticated: PropTypes.bool,\r\n};\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst PublicRoute = (props) => {\r\n    const { children, ...rest } = props;\r\n    return <Route {...rest} render={() => children} />;\r\n};\r\nPublicRoute.propTypes = {\r\n    children: PropTypes.any,\r\n};\r\nexport default PublicRoute;\r\n","import { lazy } from 'react';\r\n\r\nconst routes = [\r\n    {\r\n        path: 'panel',\r\n        component: lazy(() => import('../AdminPanel/AdminPanel')),\r\n        exact: true,\r\n    },\r\n];\r\n\r\nexport default routes;\r\n","import React, { Suspense } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport routes from './routes'; // Route list\r\n\r\nconst ProtectedRoutes = () => (\r\n    <Switch>\r\n        <Suspense fallback={<h2>Load</h2>}>\r\n            {routes.map(({ component: Component, path, exact }) => (\r\n                <Route path={`/${path}`} key={path} exact={exact}>\r\n                    <Component />\r\n                </Route>\r\n            ))}\r\n        </Suspense>\r\n    </Switch>\r\n);\r\n\r\nexport default ProtectedRoutes;\r\n","export const AUTHORIZATION = 'AUTHORIZATION';\r\n\r\nexport const changeAuthorization = (authorization) => {\r\n    return { type: AUTHORIZATION, payload: authorization };\r\n};\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://api-factory.simbirsoft1.com/api',\r\n    responseType: 'json',\r\n});\r\ninstance.defaults.headers.common['Authorization'] =\r\n    'Basic MTFkN2M5Zjo0Y2JjZWE5NmRl';\r\ninstance.defaults.headers.common['X-Api-Factory-Application-Id'] =\r\n    '5e25c641099b810b946c5d5b';\r\n\r\nexport default instance;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport classnamesBind from 'classnames/bind';\r\nimport styles from './formAuthorization.module.scss';\r\nimport { changeAuthorization } from '../../../store/actions/actionAuthorization';\r\nimport axiosConfigAuth from '../../../utils/axiosConfigAuth';\r\nimport { setToken } from '../../../utils/sessionToken';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst FormAuthorization = () => {\r\n    const classnames = classnamesBind.bind(styles);\r\n    const dispatch = useDispatch();\r\n    const [login, setLogin] = useState('intern');\r\n    const [pass, setPass] = useState('intern-S!');\r\n    const [error, setError] = useState(false);\r\n    const history = useHistory();\r\n\r\n    // ---------------------------------------------------------------\r\n    //  Обработка отправки формы\r\n    // ---------------------------------------------------------------\r\n    const handleClickBtnForm = (e) => {\r\n        e.preventDefault();\r\n        const post = async () => {\r\n            const response = await axiosConfigAuth\r\n                .post('/auth/login', {\r\n                    username: login,\r\n                    password: pass,\r\n                })\r\n                .then((res) => res.data)\r\n                .catch(() => setError(true));\r\n            dispatch(\r\n                changeAuthorization(\r\n                    typeof response === 'object'\r\n                        ? {\r\n                              auth_success: response.refrash_token,\r\n                              auth_error: false,\r\n                          }\r\n                        : {\r\n                              auth_success: '',\r\n                              auth_error: true,\r\n                          }\r\n                )\r\n            );\r\n            setToken(typeof response === 'object' ? response.access_token : '');\r\n            history.push('/panel');\r\n            return response;\r\n        };\r\n        post();\r\n    };\r\n    // ---------------------------------------------------------------\r\n    //  Событие изменения input\r\n    // ---------------------------------------------------------------\r\n    const handleChangeInput = (e, setValue) => {\r\n        setValue(e.target.value);\r\n    };\r\n    return (\r\n        <form\r\n            className={classnames('form-authorization')}\r\n            onSubmit={handleClickBtnForm}\r\n        >\r\n            <h3 className={classnames('heading-form')}>Вход</h3>\r\n            <label className={classnames('form-label')} htmlFor=\"login\">\r\n                Почта\r\n            </label>\r\n            <input\r\n                className={classnames('form-input')}\r\n                id=\"login\"\r\n                required\r\n                onChange={(e) => handleChangeInput(e, setLogin)}\r\n                defaultValue={login}\r\n            />\r\n            <label className={classnames('form-label')} htmlFor=\"password\">\r\n                Пароль\r\n            </label>\r\n            <input\r\n                className={classnames('form-input')}\r\n                id=\"password\"\r\n                type=\"password\"\r\n                required\r\n                onChange={(e) => handleChangeInput(e, setPass)}\r\n                defaultValue={pass}\r\n            />\r\n            <p\r\n                className={classnames('error-msg', {\r\n                    'active-error-msg': error,\r\n                })}\r\n            >\r\n                Проверьте логин и пароль\r\n            </p>\r\n            <div className={classnames('form-wrap-button')}>\r\n                <a href=\"#\" className={classnames('form-link')}>\r\n                    Запросить доступ\r\n                </a>\r\n                <button className={classnames('form-button')} type=\"submit\">\r\n                    Войти\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\nexport default FormAuthorization;\r\n","const getToken = () => {\r\n    return sessionStorage.getItem('token');\r\n};\r\nconst setToken = (value) => {\r\n    sessionStorage.setItem('token', value);\r\n};\r\nexport { getToken, setToken };\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport classnamesBind from 'classnames/bind';\r\nimport styles from './authorization.module.scss';\r\nimport Logo from '../Logo/Logo';\r\nimport FormAuthorization from './FormAuthorization/FormAuthorization';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst LOGO_WIDTH = 45;\r\nconst LOGO_HEIGHT = 45;\r\n\r\nconst Authorization = () => {\r\n    const { auth } = useSelector((state) => state);\r\n    const classnames = classnamesBind.bind(styles);\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n        if (!auth.auth_error) {\r\n            history.push('/panel');\r\n        }\r\n    }, [auth]);\r\n    return (\r\n        auth.auth_error && (\r\n            <div className={classnames('wrap-center')}>\r\n                <div className={classnames('header')}>\r\n                    <Logo width={LOGO_WIDTH} height={LOGO_HEIGHT} />\r\n                    <h1\r\n                        className={classnames(\r\n                            'heading-h1',\r\n                            'heading-h1_margin'\r\n                        )}\r\n                    >\r\n                        Need for drive\r\n                    </h1>\r\n                </div>\r\n                <div className={classnames('wrap-form')}>\r\n                    <FormAuthorization />\r\n                </div>\r\n            </div>\r\n        )\r\n    );\r\n};\r\nexport default Authorization;\r\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { HashRouter as Router, Switch } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport PrivateRoute from './components/Route/PrivateRoute';\nimport PublicRoute from './components/Route/PublicRoute';\nimport ProtectedRoute from './components/Route/ProtectedRoute';\nimport Authorization from './components/Authorization/Authorization';\nimport { getToken } from './utils/sessionToken';\nimport { changeAuthorization } from './store/actions/actionAuthorization';\n\nconst App = () => {\n    const dispatch = useDispatch();\n    const { auth } = useSelector((state) => state);\n    const history = useHistory();\n    useEffect(() => {\n        const token = getToken();\n        if (token) {\n            dispatch(\n                changeAuthorization({ auth_success: token, auth_error: false })\n            );\n            history.push('/panel');\n        }\n    }, []);\n\n    return (\n        <Router>\n            <Switch>\n                <PublicRoute exact={true} path=\"/\">\n                    <Authorization />\n                </PublicRoute>\n                <PrivateRoute path=\"/panel\" isAuthenticated={auth.auth_error}>\n                    <ProtectedRoute />\n                </PrivateRoute>\n            </Switch>\n        </Router>\n    );\n};\nexport default App;\n","const initState = {\r\n    auth_success: '',\r\n    auth_error: true,\r\n};\r\nconst authorization = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case 'AUTHORIZATION':\r\n            return { ...state, ...action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authorization;\r\n","import { combineReducers } from 'redux';\r\nimport authorization from './authorization';\r\n\r\nconst allReducers = combineReducers({\r\n    auth: authorization,\r\n});\r\n\r\nexport default allReducers;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { createStore } from 'redux';\nimport './index.css';\nimport App from './App';\nimport allReducers from './store/reducers';\n\nconst store = createStore(allReducers);\n\nReactDOM.render(\n    <Provider store={store}>\n        <React.StrictMode>\n            <Router>\n                <App />\n            </Router>\n        </React.StrictMode>\n    </Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}